version: '3.8'

services:
  cinesync:
    image: sureshfizzy/cinesync:latest
    container_name: cinesync
    restart: unless-stopped
    ports:
      - "8082:8082"
      - "5173:5173"
    cap_add:
      - SYS_ADMIN
    security_opt:
      - apparmor:unconfined
    devices:
      - /dev/fuse:/dev/fuse:rwm
    volumes:
      - /home:/home
      - /mnt:/mnt:rshared
      - ./db:/app/db
    environment:
      - PUID=1000
      - PGID=1000

      # Directory Paths
      - SOURCE_DIR=${SOURCE_DIR:-/path/to/files}
      - DESTINATION_DIR=${DESTINATION_DIR:-/path/to/destination}
      - USE_SOURCE_STRUCTURE=${USE_SOURCE_STRUCTURE:-false}

      # Media Folders Configuration
      - CINESYNC_LAYOUT=${CINESYNC_LAYOUT:-true}
      - 4K_SEPARATION=$${4K_SEPARATION:-true}
      - ANIME_SEPARATION=${ANIME_SEPARATION:-true}
      - KIDS_SEPARATION=${KIDS_SEPARATION:-false}
      - CUSTOM_SHOW_FOLDER=${CUSTOM_SHOW_FOLDER:-Shows}
      - CUSTOM_4KSHOW_FOLDER=${CUSTOM_4KSHOW_FOLDER:-4KShows}
      - CUSTOM_KIDS_SHOW_FOLDER=${CUSTOM_SHOW_FOLDER:-KidsShows}
      - CUSTOM_ANIME_SHOW_FOLDER=${CUSTOM_ANIME_SHOW_FOLDER:-AnimeShows}
      - CUSTOM_MOVIE_FOLDER=${CUSTOM_MOVIE_FOLDER:-Movies}
      - CUSTOM_4KMOVIE_FOLDER=${CUSTOM_4KMOVIE_FOLDER:-4KMovies}
      - CUSTOM_ANIME_MOVIE_FOLDER=${CUSTOM_ANIME_MOVIE_FOLDER:-AnimeMovies}
      - CUSTOM_KIDS_MOVIE_FOLDER=${CUSTOM_KIDS_FOLDER:-KidsMovies}
      - CUSTOM_SPORTS_FOLDER=${CUSTOM_SPORTS_FOLDER:-Sports}

      # Resolution Folder Mappings Configuration
      - SHOW_RESOLUTION_STRUCTURE=${SHOW_RESOLUTION_STRUCTURE:-false}
      - MOVIE_RESOLUTION_STRUCTURE=${MOVIE_RESOLUTION_STRUCTURE:-false}

      # Show Resolution Folder Mappings
      - SHOW_RESOLUTION_FOLDER_REMUX_4K=${SHOW_RESOLUTION_FOLDER_REMUX_4K:-UltraHDRemuxShows}
      - SHOW_RESOLUTION_FOLDER_REMUX_1080P=${SHOW_RESOLUTION_FOLDER_REMUX_1080P:-1080pRemuxLibrary}
      - SHOW_RESOLUTION_FOLDER_REMUX_DEFAULT=${SHOW_RESOLUTION_FOLDER_REMUX_DEFAULT:-RemuxShows}
      - SHOW_RESOLUTION_FOLDER_2160P=${SHOW_RESOLUTION_FOLDER_2160P:-UltraHD}
      - SHOW_RESOLUTION_FOLDER_1080P=${SHOW_RESOLUTION_FOLDER_1080P:-FullHD}
      - SHOW_RESOLUTION_FOLDER_720P=${SHOW_RESOLUTION_FOLDER_720P:-SDClassics}
      - SHOW_RESOLUTION_FOLDER_480P=${SHOW_RESOLUTION_FOLDER_480P:-Retro480p}
      - SHOW_RESOLUTION_FOLDER_DVD=${SHOW_RESOLUTION_FOLDER_DVD:-RetroDVD}
      - SHOW_RESOLUTION_FOLDER_DEFAULT=${SHOW_RESOLUTION_FOLDER_DEFAULT:-Shows}

      # Movie Resolution Folder Mappings
      - MOVIE_RESOLUTION_FOLDER_REMUX_4K=${MOVIE_RESOLUTION_FOLDER_REMUX_4K:-4KRemux}
      - MOVIE_RESOLUTION_FOLDER_REMUX_1080P=${MOVIE_RESOLUTION_FOLDER_REMUX_1080P:-1080pRemux}
      - MOVIE_RESOLUTION_FOLDER_REMUX_DEFAULT=${MOVIE_RESOLUTION_FOLDER_REMUX_DEFAULT:-MoviesRemux}
      - MOVIE_RESOLUTION_FOLDER_2160P=${MOVIE_RESOLUTION_FOLDER_2160P:-UltraHD}
      - MOVIE_RESOLUTION_FOLDER_1080P=${MOVIE_RESOLUTION_FOLDER_1080P:-FullHD}
      - MOVIE_RESOLUTION_FOLDER_720P=${MOVIE_RESOLUTION_FOLDER_720P:-SDMovies}
      - MOVIE_RESOLUTION_FOLDER_480P=${MOVIE_RESOLUTION_FOLDER_480P:-Retro480p}
      - MOVIE_RESOLUTION_FOLDER_DVD=${MOVIE_RESOLUTION_FOLDER_DVD:-DVDClassics}
      - MOVIE_RESOLUTION_FOLDER_DEFAULT=${MOVIE_RESOLUTION_FOLDER_DEFAULT:-Movies}

      # Logging Configuration
      - LOG_LEVEL=${LOG_LEVEL:-INFO}

      # Rclone Mount Configuration
      - RCLONE_MOUNT=${RCLONE_MOUNT:-false}
      - MOUNT_CHECK_INTERVAL=${MOUNT_CHECK_INTERVAL:-30}

      # TMDb/IMDB Configuration
      - TMDB_API_KEY=${TMDB_API_KEY:-}
      - LANGUAGE=${LANGUAGE:-English}
      - ANIME_SCAN=${ANIME_SCAN:-false}
      - JELLYFIN_ID_FORMAT=${JELLYFIN_ID_FORMAT:-false}
      - TMDB_FOLDER_ID=${TMDB_FOLDER_ID:-false}
      - IMDB_FOLDER_ID=${IMDB_FOLDER_ID:-false}
      - TVDB_FOLDER_ID=${TVDB_FOLDER_ID:-false}

      # Renaming Structure Configuration
      - RENAME_ENABLED=${RENAME_ENABLED:-true}
      - MEDIAINFO_PARSER=${MEDIAINFO_PARSER:-false}
      - RENAME_TAGS=${RENAME_TAGS:-Resolution}
      - MEDIAINFO_RADARR_TAGS=${MEDIAINFO_RADARR_TAGS:-{Movie Title} ({Release Year}) {Quality Full}}
      - MEDIAINFO_SONARR_STANDARD_EPISODE_FORMAT=${MEDIAINFO_SONARR_STANDARD_EPISODE_FORMAT:-{Series Title} - S{season:00}E{episode:00} - {Episode Title} {Quality Full}}
      - MEDIAINFO_SONARR_DAILY_EPISODE_FORMAT=${MEDIAINFO_SONARR_DAILY_EPISODE_FORMAT:-{Series Title} - {Air-Date} - {Episode Title} {Quality Full}}
      - MEDIAINFO_SONARR_ANIME_EPISODE_FORMAT=${MEDIAINFO_SONARR_ANIME_EPISODE_FORMAT:-{Series Title} - S{season:00}E{episode:00} - {Episode Title} {Quality Full}}
      - MEDIAINFO_SONARR_SEASON_FOLDER_FORMAT=${MEDIAINFO_SONARR_SEASON_FOLDER_FORMAT:-Season{season}}

      # Movie Collection Settings
      - MOVIE_COLLECTION_ENABLED=${MOVIE_COLLECTION_ENABLED:-false}

      # System Configuration
      - RELATIVE_SYMLINK=${RELATIVE_SYMLINK:-false}
      - MAX_PROCESSES=${MAX_PROCESSES:-16}
      - MAX_CORES=${MAX_CORES:-1}

      # File Handling Configuration
      - SKIP_EXTRAS_FOLDER=${SKIP_EXTRAS_FOLDER:-true}
      - SHOW_EXTRAS_SIZE_LIMIT=${SHOW_EXTRAS_SIZE_LIMIT:-5}
      - MOVIE_EXTRAS_SIZE_LIMIT=${MOVIE_EXTRAS_SIZE_LIMIT:-250}
      - 4K_SHOW_EXTRAS_SIZE_LIMIT=${4K_SHOW_EXTRAS_SIZE_LIMIT:-800}
      - 4K_MOVIE_EXTRAS_SIZE_LIMIT=${4K_MOVIE_EXTRAS_SIZE_LIMIT:-2048}
      - ALLOWED_EXTENSIONS=${ALLOWED_EXTENSIONS:-.mp4,.mkv,.srt,.avi,.mov,.divx,.strm}
      - SKIP_ADULT_PATTERNS=${SKIP_ADULT_PATTERNS:-true}

      # Real-Time Monitoring Configuration
      - SLEEP_TIME=${SLEEP_TIME:-60}
      - SYMLINK_CLEANUP_INTERVAL=${SYMLINK_CLEANUP_INTERVAL:-600}

      # Plex Integration Configuration
      - ENABLE_PLEX_UPDATE=${ENABLE_PLEX_UPDATE:-false}
      - PLEX_URL=${PLEX_URL:-}
      - PLEX_TOKEN=${PLEX_TOKEN:-}

      # CineSync Configuration
      - CINESYNC_IP=${CINESYNC_IP:-0.0.0.0}
      - CINESYNC_API_PORT=${CINESYNC_API_PORT:-8082}
      - CINESYNC_UI_PORT=${CINESYNC_UI_PORT:-5173}
      - CINESYNC_AUTH_ENABLED=${CINESYNC_AUTH_ENABLED:-true}
      - CINESYNC_USERNAME=${CINESYNC_USERNAME:-admin}
      - CINESYNC_PASSWORD=${CINESYNC_PASSWORD:-admin}

      # MediaHub Service Configuration
      - MEDIAHUB_AUTO_START=${MEDIAHUB_AUTO_START:-true}
      - RTM_AUTO_START=${RTM_AUTO_START:-false}
      - FILE_OPERATIONS_AUTO_MODE=${FILE_OPERATIONS_AUTO_MODE:-true}

      # Database Configuration
      - DB_THROTTLE_RATE=${DB_THROTTLE_RATE:-100}
      - DB_MAX_RETRIES=${DB_MAX_RETRIES:-10}
      - DB_RETRY_DELAY=${DB_RETRY_DELAY:-1.0}
      - DB_BATCH_SIZE=${DB_BATCH_SIZE:-1000}
      - DB_MAX_WORKERS=${DB_MAX_WORKERS:-20}
